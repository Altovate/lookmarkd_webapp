{% extends 'dashboard-base.html.twig' %} 
{% block title %}Messages{% endblock %}
{% block stylesheetsCustom %}
<style type="text/css">
	#threads, #message-body {
		background: #ffffff;
	}
	
	#threads{
		border-right: #ecf0f1 2px solid;
	}
	
	#threads #threads-header, #message-body #new-message-header {
		background: #ecf0f1;
	}
	
	#message-body #no-threads-alert {
		text-align: center;
	}
	
	#threads .thread-details {
		border-bottom: #ecf0f1 solid 1px;
	}
	
	#threads .thread-details.active {
		background-color: #5B6271;
		color: #ffffff;
	}
	
	#threads .thread-details.active p {
		color: #ffffff;
	}
	
	#new-msg.btn { 
		margin-top: 5px;
	}
	
	#new-msg-row, #new-message-form {
		display: none;
	}
	
	
</style>
<link rel="stylesheet" href="{{ asset('styles/typeahead.css') }}" />
{% endblock %} 
{% block stylesheetsDist %}
<style type="text/css">
</style>
<script>
    (function(u){function loadCSS(e,t,n){"use strict";function r(){for(var t,i=0;i<d.length;i++)d[i].href&&d[i].href.indexOf(e)>-1&&(t=!0);t?o.media=n||"all":setTimeout(r)}var o=window.document.createElement("link"),i=t||window.document.getElementsByTagName("script")[0],d=window.document.styleSheets;return o.rel="stylesheet",o.href=e,o.media="only x",i.parentNode.insertBefore(o,i),r(),o}for(var i in u){loadCSS(u[i]);}}(["{{ asset('styles/main.css') }}","{{ asset('styles/dashboard-style.css') }}","{{ asset('styles/style-responsive.css') }}","{{ asset('styles/typeahead.css') }}"]));
</script>
<noscript>
	<link rel="stylesheet" href="{{ asset('styles/main.css') }}">
	<link rel="stylesheet" href="{{ asset('dashboard-style/style.css') }}" />
	<link rel="stylesheet"
		href="{{ asset('styles/style-responsive.css') }}" />
	<link rel="stylesheet" href="{{ asset('styles/typeahead.css') }}" />
</noscript>
{% endblock stylesheetsDist %} {% block content %}
<div class="row mt">
	<div class="col-lg-3 col-md-3 col-sm-1 col-sm-offset-1 container-fluid" id="threads">
		<div class="row" id="threads-header">
			<div class="col-sm-8">
				<h4>Inbox</h4>
			</div>
			<div class="col-sm-4">
				<button class="btn btn-sm btn-success" id="new-msg"><strong>+ New</strong></button>
			</div>
		</div>
		<div class="row thread-details" id="new-msg-row">
			<div class="col-sm-8">
				<p><strong>New message</strong></p> 
			</div>
			<div class="col-sm-offset-2 col-sm-2">
				<p><span class="ion-ios-close-outline cursor-pointer" id="new-msg-closer"></span></p>
			</div>
		</div>
		{% if totalThreads == 0 %}
		<div class="row thread-details" id="new-msg-helper">
			<div class="col-sm-12">
				<p>Click on the green "New" button to send a new message</p>
			</div>
		</div>
		{% endif %}
		{% for thread in threads %}
		<div class="row thread-details cursor-pointer" id="{{ thread.id }}">
			<div class="col-sm-8">
				<p><strong>{{ thread.associatedUser }}</strong></p> 
			</div>
			<div class="col-sm-offset-2 col-sm-2">
				<p><span class="ion-ios-close-outline cursor-pointer thread-delete"></span></p>
			</div>
		</div>
		{% endfor %}
	</div>
	<div class="col-lg-7 col-md-7 col-sm-7 container-fluid" id="message-body">
		<div class="row mt" id="no-threads-alert">
			<h1 class="ion-alert"></h1>
			<h3>No message selected</h3>
		</div>
		<div class="row" id="new-message-form">
			<div class="col-sm-12 col-lg-12 col-md-12 container-fluid">
				<div class="row" id="new-message-header">
						<h4>New Message</h4>
				</div>
				<div class="row mt">
					<div class="col-sm-12 col-lg-12 col-md-12">
						<div class="form-group">
							<input type="text" 
								class="form-control typeahead" 
								placeholder="Enter recepient name"
								data-recipients-url="{{ url('message_get_recipients_list') }}"
								id="recipient" />
						</div>
						<div class="form-group">
							<textarea placeholder="Enter message..." class="form-control"></textarea>
						</div>
						<div class="form-group">
							<button class="btn btn-md btn-success pull-right">Send&nbsp;&nbsp<span class="ion-ios-paperplane"></span></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
{% block javascriptDataMain %}"{{ asset('scripts/messages-inbox-main.js') }}"{% endblock %}